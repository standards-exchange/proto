syntax = "proto3";

package standards.open.v1;

import "google/protobuf/timestamp.proto";
import "google/type/date.proto";

option go_package = "github.com/standards-exchange/protobuf-go/standards/open/v1";

// A proto defined object representing the data parsed from a Alexander Forbes
// Regulation 28 Survey Template
message RT000NVJ3 {
  // A list of records
  // There could be more than one Reg28 sheet withing a particular spreadsheet, which would represent individual
  // records.
  repeated Record records = 1;
  // Defining a single record / row within excel
  message Record {
    // The Survey Type (B6)
    string survey = 1;
    // The name of the fund (B7)
    string fund = 2;
    // The AF product ID (I7)
    string product_id = 3;
    // The Management Company
    string management_company = 4;
    // The effective month of the report
    google.type.Date month = 5;
    // Enumerations of type of fund
    enum FundType {
      // Not specified by user
      FUND_TYPE_UNSPECIFIED = 0;
      // Segregated mandate
      SEGREGATED = 1;
      // Unit trust
      UNIT_TRUST = 2;
      // Pooled investment
      POOLED = 3;
    }
    // type of fund (C12:C14)
    FundType fund_type = 6;
    // Enumerations of the risk classification
    enum RiskClassification {
      // Not specified
      RISK_CLASSIFICATION_UNSPECIFIED = 0;
      // Aggressive risk
      AGGRESSIVE = 1;
      // Moderate risk
      MODERATE = 2;
      // Conservative risk
      CONSERVATIVE = 3;
    }
    // risk classification (F12:F14)
    RiskClassification risk_classification = 7;
    // Message defining the return by category.
    // All returns should be populated in percentage terms e.g. 1% and not 0.01
    message Returns {
      double domestic_equities = 1;
      double domestic_debt_instruments = 2;
      double domestic_cash_and_money_market = 3;
      double domestic_immovable_property = 4;
      double domestic_commodities = 5;
      double domestic_hedge_funds = 6;
      double domestic_private_equity_funds = 7;
      double domestic_other = 8;
      double total_domestic = 9;
      double international_equities = 10;
      double international_debt_instruments = 11;
      double international_cash_and_money_market = 12;
      double international_immovable_property = 13;
      double international_commodities = 14;
      double international_hedge_funds = 15;
      double international_private_equity_funds = 16;
      double international_other = 17;
      double total_international = 18;
      double total_portfolio = 19;
      double gross_unit_price_or_index_value = 20;
    }
    // Investment returns for the Portfolio
    Returns portfolio_returns = 8;
    // Investment returns for the Benchmark
    Returns benchmark_returns = 9;
    // Message defining the return by category.
    // All exposures should be populated in decimal form e.g. 1% as 0.01
    message Exposure {
      // Sum of all domestic_equities_* should equal the value in domestic_equities
      double total_domestic_equities = 1;
      double domestic_equities_resources = 2;
      double domestic_equities_financials = 3;
      double domestic_equities_industrials = 4;
      double domestic_equities_other_equity = 5;
      // Sum of all domestic_debt_instruments_* should equal the value in domestic_debt_instruments
      double total_domestic_debt_instruments = 6;
      double domestic_debt_instruments_0_to_3_years = 7;
      double domestic_debt_instruments_3_to_7_years = 8;
      double domestic_debt_instruments_7_to_12_years = 9;
      double domestic_debt_instruments_12_plus_years = 10;
      double domestic_debt_instruments_other = 11;
      double total_domestic_cash_and_money_market = 12;
      double total_domestic_immovable_property = 13;
      double domestic_immovable_property_direct = 14;
      double domestic_immovable_property_listed = 15;
      double domestic_immovable_property_unlisted = 16;
      double total_domestic_commodities = 17;
      double total_domestic_hedge_funds = 18;
      double total_domestic_private_equity_funds = 19;
      double total_domestic_other = 20;
      // Sum of all international_* should equal the value in international_total
      double total_international = 21;
      double international_equities = 22;
      double international_debt_instruments = 23;
      double international_cash_and_money_market = 24;
      double international_immovable_property = 25;
      double international_commodities = 26;
      double international_hedge_funds = 27;
      double international_private_equity_funds = 28;
      double international_other = 29;
      double total_portfolio = 30;
    }
    // the physical exposure by category and subcategory
    Exposure physical_exposure = 10;
    // the effective exposure by category and subcategory
    Exposure effective_exposure = 11;
    // the benchmark exposure by category and subcategory
    Exposure benchmark_exposure = 12;

    // 3. Market Value information
    MarketValueInfo market_value_info = 13;
    // Attributes of Market Value info.
    message MarketValueInfo {
      // 3. Market value of Portfolio on which performance is measured (in Rands)
      double performance_portfolio = 1;
      // 3a. Market value of total balanced portfolios (Rands)
      double total_balanced_portfolio = 2;
    }

    // 4. Segregated portfolios
    SegregatedPortfolios segregated_portfolios = 14;
    // Attributes of Segregated portfolios
    message SegregatedPortfolios {
      // 4. # OF SEGREGATED PORTFOLIOS THAT MAKE UP THE COMPOSITE (IF COMPOSITE CONSISTS OF SEGREGATED ACCOUNTS)
      int32 segregated_portfolios_count = 1;
      // 4a.  HIGHEST RETURN segregated portfolios
      double highest_return = 2;
      // 4b.  LOWEST RETURN segregated portfolios
      double lowest_return = 3;
      // 4c.  MEDIAN RETURN segregated portfolios
      double median_return = 4;
      // 4d.  INTERNAL DISPERSION segregated portfolios (Calculated as the standard deviation of returns around the composite return.)
      double internal_dispersion = 5;
    }

    // 5. Yields and Duration
    YieldsAndDurations yields_and_durations = 15;
    // Attributes of the YieldsAndDurations object.
    message YieldsAndDurations {
      //     5a. MODIFIED DURATION - DOMESTIC CASH AND MONEY MARKET HOLDINGS (DAYS)
      double modified_duration_domestic_cash_and_money_market_holdings = 20;
      //     5b. MODIFIED DURATION - DOMESTIC DEBT HOLDINGS (YEARS)
      double modified_duration_domestic_debt_holdings = 21;
      //     5c. MODIFIED DURATION - DOMESTIC TOTAL FIXED INTEREST HOLDINGS (YEARS)
      double modified_duration_domestic_total_fixed_interest_holdings = 22;
      //     5d. WEIGHTED AVERAGE PRICE:EARNINGS RATIO - DOMESTIC EQUITIES
      double weighted_average_pe_ratio_domestic_equities = 23;
      //     5e.  WEIGHTED AVERAGE DIVIDEND YIELD - DOMESTIC EQUITIES
      double weighted_average_dividend_yield_domestic_equities = 24;
    }

    // 6. TOP TEN DOMESTIC EQUITY HOLDINGS (TO BE SUPPLIED QUARTERLY)
    repeated Holding top_ten_domestic_equity_holdings = 25;
    // Definition of a holding reported
    message Holding {
      // Display name of holding
      string name = 1;
      // JSE code of the holding, for example: DSY
      string code = 2;
      // Percentage allocation of total equities
      double equities_allocation = 3;
      // Percentage allocation of total Portfolio
      double portfolio_allocation = 4;
    }
    // 7. RETURN CALCULATION METHOD USED, e.g. NAV-NAV, gross of fees, and with income reinvested
    string return_calculation_method_used = 26;
    // 8.  BENCHMARK DESCRIPTION: Specify the Benchmark per asset class as well as the total fund benchmark
    string benchmark_description = 27;
    // 9a. Market Value Reconciliation
    MarketValueReconciliation market_value_reconciliation = 28;
    // Defining a Market Value Reconciliation attributes.
    message MarketValueReconciliation {
      // Opening Market Value
      double opening_market_value = 1;
      // Total Contributions
      double total_contributions = 2;
      // Total Withdrawals
      double  total_withdrawals = 3;
      // Adjustment for market movement (+/-)
      double market_movement = 4;
      // Closing Market Value
      double closing_value = 5;
    }
    // 9b. Composite Reconciliation
    CompositeReconciliation composite_reconciliation = 29;
    // Defining a Composite Reconciliation attributes.
    message CompositeReconciliation {
      // Opening number of funds
      int32 opening_funds_count = 1;
      // 9b.  COMPOSITE RECONCILIATION : ADD NEW FUNDS
      int32 new_funds_count = 2;
      // Reason for new funds
      string new_funds_reason = 3;
      // 9b.  COMPOSITE RECONCILIATION : ADD NEW FUNDS
      int32 removed_funds_count = 4;
      // Reason for funds removed
      string removed_funds_reason = 5;
      // 9b.  COMPOSITE RECONCILIATION : LESS FUNDS REMOVED COMPOSITE
      int32 closing_funds_count = 6;
    }
    // Additional Equity information
    EquityInfo equity_info = 30;
    // Defining Equity Info attributes.
    message EquityInfo {
      // 10. Equity % of assets off benchmark
      double percent_assets_off_benchmark = 1;
      // 10. Equity % average cash holding for the month
      double average_monthly_cash_percentage = 2;
      // 10. Equity % gold held
      double gold_percentage = 3;
      // 10. Equity % listed property held
      double listed_property_percentage = 4;
      // % unlisted property held
      double unlisted_property_percentage = 5;
    }
    // Additional Bond information
    BondInfo bond_info = 31;
    // Defining Bond Info attributes.
    message BondInfo {
      // 11. Percentage in ILBâ€™s
      double ilbs_percentage = 1;
      // 11. Percentage in cash
      double cash_percentage = 2;
      // 11. Restrictions ito derivatives
      string restrictions_ito_derivatives = 3;
      // 11. % of assets off benchmark
      double bonds_percent_assets_off_benchmark = 4;
      // 11. Modified duration limit
      double bonds_modified_duration_limit = 5;
      // 11. Running yield
      double bonds_running_yield = 6;
      // 11. Weighted average term to maturity
      double weighted_average_ttm = 7;
      // 11. Credit spread modified duration
      double credit_spread_modified_duration = 8;
      // 11. % listed vs unlisted instruments
      double listed_vs_unlisted_instruments = 9;
      // 11. % of instruments below investment grade
      double below_investment_grade_percentage = 10;
    }

    // Additional Cash information
    CashInfo cash_info = 32;
    // Defining Bond Info attributes.
    message CashInfo {
      // 12. CASH - Running yield
      double running_yield = 1;
      // 12. CASH - Weighted average term to maturity
      double weighted_average_ttm = 2;
    }
  }
}